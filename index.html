<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career Progression</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Font Import */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Dark background for a 'pitch deck' feel */
            color: #e5e7eb; /* Light text */
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem 1rem;
            margin: 0;
        }
        .timeline-container {
            max-width: 1000px;
            width: 100%;
        }
        /* Vertical Timeline Styles (Main View) */
        .timeline-item {
            position: relative;
            padding-bottom: 3rem; 
            cursor: pointer;
        }
        .timeline-item:not(:last-child)::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0.5rem; 
            width: 5px; 
            height: 100%;
            background: linear-gradient(to bottom, #10b981, #34d399); 
            z-index: 0;
            border-radius: 9999px;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.5); 
        }
        .dot {
            position: absolute;
            left: 0;
            top: 0;
            transform: translateX(-50%);
            width: 1.75rem; 
            height: 1.75rem;
            border-radius: 50%;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 0 6px #0d1117; 
            background-color: #34d399;
            color: #0d1117; 
        }

        .card {
            background-color: #1f2937;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.5);
            border: 1px solid #374151; 
        }
        .card:hover {
            transform: translateY(-6px) scale(1.02); 
            box-shadow: 0 15px 40px -5px rgba(0,0,0,0.7), 0 0 20px rgba(52, 211, 153, 0.4); 
            background-color: #253140;
        }
        
        .card h2 {
            color: #34d399; 
        }
        
        /* Detail View Specific Styles */
        .detail-card {
            background-color: #1f2937;
            padding: 2rem;
            border-radius: 1rem;
            border: 1px solid #374151;
        }
        .detail-card h1 {
            color: #34d399;
        }
        .detail-card ul {
            list-style: disc;
            margin-left: 1.5rem;
        }

        /* The horizontal timeline CSS has been removed */
        /* and replaced with Flexbox/Tailwind in createDetailView/createSidebarNavigation */
    </style>
    <!-- Load Lucide Icons for aesthetic appeal -->
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

<div id="app" class="timeline-container">
    <!-- Content will be injected here by JavaScript -->
</div>

<script>
    // --- Rainbow Color Palette ---
    // Defined 11 distinct colors for the 11 roles
    const RAINBOW_COLORS = [
        { border: 'border-red-500', text: 'text-red-400' },       
        { border: 'border-orange-500', text: 'text-orange-400' }, 
        { border: 'border-yellow-500', text: 'text-yellow-400' }, 
        { border: 'border-lime-500', text: 'text-lime-400' },     
        { border: 'border-teal-500', text: 'text-teal-400' },     
        { border: 'border-sky-500', text: 'text-sky-400' },       
        { border: 'border-blue-500', text: 'text-blue-400' },     
        { border: 'border-indigo-500', text: 'text-indigo-400' }, 
        { border: 'border-purple-500', text: 'text-purple-400' }, 
        { border: 'border-pink-500', text: 'text-pink-400' },     
        { border: 'border-fuchsia-500', text: 'text-fuchsia-400' },
    ];

    // --- Application Data ---
    const roles = [
        {
            id: 'role-11',
            title: 'Seeking Next Opportunity', // UPDATED
            subtitle: 'Leveraging Leadership and Implementation Experience',
            years: 'Present',
            theme: 'pause',
            icon: 'search',
            label: 'CURRENT FOCUS',
            description: 'Actively seeking a new London-based role to apply senior management, portfolio implementation, and operational transformation expertise.',
            details: [
                'Actively networking and interviewing for senior roles within the London investment management market.',
                'Targeting positions that require a deep understanding of the investment lifecycle from front-office implementation through to operations.',
                'Utilizing time to refresh market knowledge and compliance understanding relevant to the UK/European region.',
            ]
        },
        {
            id: 'role-10',
            title: 'Relocation Career Break', // UPDATED
            subtitle: 'Strategic Move to London',
            years: 'Jul 2024 - Present',
            theme: 'pause',
            icon: 'pause',
            label: 'STRATEGIC RELOCATION',
            description: 'Facilitated personal relocation from Hong Kong to London to return to the UK market.',
            details: [
                'After seven years in Hong Kong, my family and I decided to relocate back to London.',
                'Parted ways with Fidelity International to facilitate a smooth international transition.',
            ]
        },
        {
            id: 'role-9',
            title: 'Equity Implementation (Head of APAC)', // UPDATED
            subtitle: 'Senior Leadership of Equity Implementation Teams (HK, SG, TY)',
            years: 'Jul 2022 - Jul 2024',
            theme: 'leader',
            icon: 'chart-spline',
            label: 'PORTFOLIO OPTIMIZATION',
            description: 'Senior management of multi-location teams, driving operational modernization, mitigating risk, and providing direct portfolio manager support across global accounts.',
            details: [
                'Senior leadership of the equity portfolio implementation team across Hong Kong, Singapore and Tokyo.',
                'Drove systematic deployment of lead strategies across follower accounts, ensuring precision and consistency.',
                'Managed daily trading operations, including securities trade generation to maintain portfolio targets, cash, currency, and liquidity requirements.',
                'Oversight of portfolio compliance (pre-trade) and the full trade lifecycle through the execution desk and back-office functions.',
                'Development and mentorship of team members, structuring duties to align with business and client requirements.',
            ]
        },
        {
            id: 'role-8',
            title: 'FX Implementation (Head of APAC)', // UPDATED
            subtitle: 'Promoted to Associate Director',
            years: 'Apr 2021 - Jul 2022',
            theme: 'leader',
            icon: 'trending-up',
            label: 'DIRECTORSHIP & GROWTH',
            description: 'Promotion reflecting expanded scope and successful delivery of FX operational stability and strategy execution across Asia Pacific.',
            details: [
                'Promoted from Senior Manager to Associate Director in April 2021.',
                'Continued leadership over FX implementation team and strategy deployment.',
                'Key focus on developing broker relationship management, price discovery, and best execution practices for FX trading.',
            ]
        },
        {
            id: 'role-7',
            title: 'FX Implementation (Senior Manager)', // UPDATED
            subtitle: 'Establishment of FX Operations Team in Hong Kong',
            years: 'May 2019 - Apr 2021',
            theme: 'leader',
            icon: 'users',
            label: 'LEADERSHIP ACQUISITION',
            description: 'Established and led the new FX operations team in Hong Kong following relocation from Sydney.',
            details: [
                'Established and led the new FX operations team in Hong Kong following relocation from Sydney.',
                'Led implementation of fund-manager and client-driven FX strategies (hedges, overlays).',
                'Responsibilities closely aligned to the Equity portfolio implementation role, but with a sole focus on FX.',
                'Occasional FX trade execution duties to support the trading desk and ensure best practice implementation.',
            ]
        },
        {
            id: 'role-6',
            title: 'Multi-Asset Implementation (Senior Analyst APAC)', // UPDATED
            subtitle: 'Transition to Hong Kong',
            years: 'Jan 2017 - May 2019',
            theme: 'global',
            icon: 'globe',
            label: 'INTERNATIONAL ARBITRAGE',
            description: 'Executed successful professional transition from London to APAC, supporting expansion of the regional business and maintaining core front-office duties.',
            details: [
                'Relocated from London to Hong Kong in January 2017 to support expansion of Asia business.',
                'Continued core responsibilities of portfolio implementation and investment operations in a new, expanding regional market.',
                'Seamless transition ensuring continuity of service to portfolio managers during international transfer.',
            ]
        },
        {
            id: 'role-5',
            title: 'Multi-Asset Implementation (Senior Analyst)', // UPDATED
            subtitle: 'First Promotion to Senior Analyst',
            years: 'Jul 2015 - Dec 2016',
            theme: 'foundation',
            icon: 'award',
            label: 'PROMOTION & SCOPE',
            description: 'Recognition of expertise leading to promotion; focused on expanding trade implementation scope and improving operational efficiency.',
            details: [
                'Promoted from Analyst to Senior Analyst in July 2015.',
                'Increased responsibility for complex trade implementation and oversight across a wider range of asset classes.',
                'Acted as a key point of contact between portfolio managers and the execution desk.',
            ]
        },
        {
            id: 'role-4',
            title: 'Multi-Asset Implementation (Analyst)', // UPDATED
            subtitle: 'Crucial Shift to the Front-Office',
            years: 'Apr 2013 - Jun 2015',
            theme: 'foundation',
            icon: 'target',
            label: 'FRONT-OFFICE INTEGRATION',
            description: 'Crucial shift to direct portfolio implementation, covering equities, fixed income, ETFs, and third-party funds.',
            details: [
                'Successfully transitioned into a front-office support function focused on trade implementation.',
                'Executed trades for direct equity and fixed income securities, ETFs, internal funds and third party mutual funds.',
                'Managed third party trade execution via platforms like Calastone, fax and custodian portals.',
                'Ensured accurate portfolio positioning against target exposures.',
            ]
        },
        {
            id: 'role-3',
            title: 'Cash Reconciliations (Analyst)', // UPDATED
            subtitle: 'Refining Back-Office Rigor',
            years: 'Sep 2012 - Mar 2013',
            theme: 'foundation',
            icon: 'currency',
            label: 'FINANCIAL ACCURACY',
            description: 'Focused period on ensuring financial integrity through advanced daily cash reconciliation processes.',
            details: [
                'Analyst focusing solely on cash management and reconciliation.',
                'Responsible for complex currency and transaction reconciliation across multi-jurisdictional accounts.',
                'Mitigated operational risk by ensuring timely and accurate cash positioning.',
            ]
        },
        {
            id: 'role-2',
            title: 'Corporate Actions (Analyst)', // UPDATED
            subtitle: 'Technical Depth Build-Out',
            years: 'Sep 2010 - Aug 2012',
            theme: 'foundation',
            icon: 'layers',
            label: 'SPECIALIZED KNOWLEDGE',
            description: 'Developed highly specialized knowledge in complex and time-sensitive corporate restructuring events and their operational impact.',
            details: [
                'Gained expertise in highly complex events such as mergers, acquisitions, stock splits, and dividends.',
                'Ensured accurate and timely processing across various security types and markets.',
                'Responsible for communicating corporate action impacts to fund managers and other internal stakeholders.',
            ]
        },
        {
            id: 'role-1',
            title: 'Investment Services (Apprenticeship)', // UPDATED
            subtitle: 'Core Infrastructure & Trade Settlements',
            years: 'Oct 2008 - Aug 2010',
            theme: 'foundation',
            icon: 'cog',
            label: 'CORE INFRASTRUCTURE',
            description: 'Mastered foundational back-office functions, establishing a strong base in regulatory and operational rigor.',
            details: [
                'Apprentice, Investment Services, Fidelity International.',
                'Focus on fundamental back-office processes.',
                'Managed daily cash reconciliation and trade settlement tasks, ensuring high levels of accuracy and regulatory compliance.',
                'Established a comprehensive understanding of the full trade lifecycle.',
            ]
        },
    ];

    // --- Template Functions ---

    // Generates the HTML for the main timeline view (Vertical)
    function createTimelineView() {
        // The roles array is defined newest-to-oldest, which is correct for the vertical timeline.
        const timelineItems = roles.map((role, index) => {
            // Logic to extract only the start date/year (e.g., "Jul 2024 - Present" -> "Jul 2024")
            const displayDate = role.years.split('-')[0].trim(); 

            // Use index and modulo to cycle through the color palette for the rainbow effect
            const color = RAINBOW_COLORS[index % RAINBOW_COLORS.length];
            
            return `
                <div class="timeline-item" onclick="navigate('role', '${role.id}')">
                    <!-- DOT -->
                    <div class="dot"><i data-lucide="${role.icon}" class="w-5 h-5"></i></div>
                    <div class="card p-6 rounded-xl ml-6 border-l-4 ${color.border}">
                        <p class="text-xs font-semibold uppercase ${color.text}">${role.label} (${displayDate})</p>
                        <h2 class="text-2xl font-bold mb-1 flex items-center">
                            <i data-lucide="line-chart" class="w-6 h-6 mr-3 text-[#34d399]"></i>
                            ${role.title}
                        </h2>
                        ${role.subtitle ? `<p class="text-lg font-medium text-gray-300">${role.subtitle}</p>` : ''}
                        <p class="mt-2 text-gray-400 text-sm">${role.description}</p>
                    </div>
                </div>
            `;
        }).join('');

        return `
            <header class="mb-12 text-center">
                <h1 class="text-5xl font-extrabold text-[#34d399] tracking-tighter shadow-green-500/50">
                    CAREER TIMELINE
                </h1>
                <p class="mt-2 text-xl text-gray-300">
                    <i data-lucide="trending-up" class="w-6 h-6 inline-block mr-2 text-[#34d399]"></i>
                    Career Valuation: Proven Asset & Established For The Next Phase of Growth
                </p>
                <div class="h-1 w-32 bg-[#34d399] mx-auto mt-4 rounded-full shadow-lg shadow-[#34d399]/50"></div>
            </header>
            <div class="relative pl-10">
                ${timelineItems}
            </div>
            <footer class="mt-12 text-center text-gray-500 text-sm">
                <p>Click any card to drill down into the role's specific responsibilities and achievements.</p>
            </footer>
        `;
    }
    
    /**
     * Generates the vertical sidebar navigation using a responsive list layout 
     * with horizontal labels, positioned newest-to-oldest.
     * * This function now extracts the role modifier (seniority) and displays it separately.
     */
    function createSidebarNavigation(currentRoleId) {
        // Use the original roles array, which is already defined newest-to-oldest (Role 11 at top, Role 1 at bottom).
        const chronologicalRoles = roles; 

        const navItems = chronologicalRoles.map(role => {
            const isActive = role.id === currentRoleId;

            // 1. Extract content inside parentheses (the seniority/modifier)
            const modifierMatch = role.title.match(/\(([^)]+)\)/);
            const modifier = modifierMatch ? modifierMatch[1].trim() : '';

            // 2. Get the clean title (everything before the parenthesis, or the whole title if no parenthesis)
            const baseTitle = role.title.replace(/\s*\([^)]+\)/, '').trim(); 
            
            // This already extracts the singular start date/year, as requested
            const year = role.years.split('-')[0].trim(); 
            
            const activeClass = isActive 
                ? 'bg-gray-800 border-l-4 border-[#34d399] text-[#34d399] font-bold shadow-lg' 
                : 'text-gray-400 hover:bg-gray-700 hover:text-white border-l-4 border-transparent';
            
            return `
                <li class="mb-1">
                    <a href="#role/${role.id}" 
                       class="block p-3 rounded-r-lg transition-all duration-200 ${activeClass}" 
                       onclick="event.preventDefault(); navigate('role', '${role.id}')"
                    >
                        <span class="text-xs uppercase text-gray-500 block">${year}</span>
                        <span class="text-sm">${baseTitle}</span>
                        ${modifier ? `<span class="text-xs italic text-gray-500 block ${isActive ? 'text-gray-400' : ''}">${modifier}</span>` : ''}
                    </a>
                </li>
            `;
        }).join('');

        return `
            <nav class="p-2 sticky top-4">
                <h3 class="text-lg font-semibold text-gray-400 mb-4 ml-3 hidden lg:block">Career History</h3>
                <ul class="space-y-1">
                    ${navItems}
                </ul>
            </nav>
        `;
    }

    // Generates the HTML for a specific role detail view
    function createDetailView(role) {
        // Find the index of the role to get the correct color
        // The index is based on the original roles array (newest first) but used only for coloring.
        const index = roles.findIndex(r => r.id === role.id);
        const color = RAINBOW_COLORS[index % RAINBOW_COLORS.length];
        
        // Define border and text classes dynamically
        const borderColorClass = color.border;
        const labelColorClass = color.text;

        const detailsList = role.details.map(detail => `<li class="mb-2 text-gray-300">${detail}</li>`).join('');

        return `
            <div class="my-8 w-full max-w-7xl mx-auto px-4">
                
                <!-- Back Button -->
                <button 
                    onclick="navigate('home')" 
                    class="flex items-center text-gray-300 hover:text-[#34d399] transition mb-6 px-4 py-2 rounded-lg border border-gray-600 hover:border-[#34d399]"
                >
                    <i data-lucide="arrow-left" class="w-5 h-5 mr-2"></i>
                    Back to Main Timeline
                </button>

                <!-- Two-Column Layout for Detail View -->
                <div class="flex flex-col lg:flex-row gap-8">
                    <!-- LEFT SIDEBAR (Navigation) -->
                    <!-- Sticky top-4 keeps the nav in place when scrolling the main content -->
                    <div class="lg:w-1/4 max-w-xs lg:min-w-64">
                        ${createSidebarNavigation(role.id)}
                    </div>

                    <!-- RIGHT MAIN CONTENT (Details) -->
                    <div class="flex-1 min-w-0">
                        <div class="detail-card border-l-8 ${borderColorClass}">
                            <p class="text-sm font-semibold uppercase ${labelColorClass} mb-1">${role.label} (${role.years.split('-')[0].trim()})</p>
                            <h1 class="text-4xl font-extrabold mb-2 text-[#34d399] flex items-center">
                                <!-- Placeholder Logo - Always theme green -->
                                <i data-lucide="line-chart" class="w-8 h-8 mr-3 text-[#34d399]"></i> 
                                ${role.title}
                            </h1>
                            ${role.subtitle ? `<h3 class="text-xl font-medium text-gray-400 mb-6">${role.subtitle}</h3>` : ''}

                            <div class="h-1 w-full bg-gray-700 my-6 rounded-full"></div>

                            <h4 class="text-xl font-semibold text-gray-200 mb-3">Key Responsibilities & Achievements:</h4>
                            <ul class="list-disc space-y-2 text-lg">
                                ${detailsList}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // --- Routing Logic ---

    const app = document.getElementById('app');

    function navigate(page, id) {
        if (page === 'home') {
            window.location.hash = '#home';
        } else if (page === 'role' && id) {
            window.location.hash = `#role/${id}`;
        }
    }

    function renderPage() {
        const hash = window.location.hash.slice(1);
        app.innerHTML = '';
        
        // Reset container classes (important for mobile/desktop layouts)
        const isDetailView = hash.startsWith('role/');
        app.classList.toggle('timeline-container', !isDetailView);
        app.classList.toggle('w-full', isDetailView);

        if (!hash || hash === 'home') {
            app.innerHTML = createTimelineView();
        } else if (isDetailView) {
            const roleId = hash.split('/')[1];
            const role = roles.find(r => r.id === roleId);
            
            if (role) {
                app.innerHTML = createDetailView(role);
            } else {
                app.innerHTML = `<div class="text-center text-red-500 text-2xl my-20">Error: Role not found. <button onclick="navigate('home')" class="text-blue-400 underline">Go Home</button></div>`;
            }
        } else {
             // Default to home if hash is unrecognized
             app.innerHTML = createTimelineView();
        }

        // Re-initialize icons after content injection
        lucide.createIcons();
        window.scrollTo(0, 0); // Scroll to top on page change
    }

    // Event listeners for routing
    window.addEventListener('hashchange', renderPage);

    // Initial load
    window.onload = function() {
        if (!window.location.hash) {
            window.location.hash = '#home';
        }
        renderPage();
    };

</script>

</body>
</html>
